(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[538],{7220:function(e,a,t){"use strict";t.r(a);var n,s=t(29),r=t(5627),o=t.n(r),l=t(7794),d=t.n(l),c=t(9008),m=t.n(c);t(7294),t(5152);var w=t(1163),u=t(1787),v=t.n(u),p=t(5893);function y(e){var a=(0,w.useRouter)(),t=e.params,n=a.query.level;console.log("level=>>",n,t);var s=e.tdk;return window.pageLevel=n,window.pageLevel,(0,p.jsxs)("div",{className:o().dynamic([["3347930788",[v(),v()]]])+" container mapContainer",children:[(0,p.jsxs)(m(),{children:[(0,p.jsx)("title",{className:o().dynamic([["3347930788",[v(),v()]]]),children:s}),(0,p.jsx)("link",{rel:"icon",href:"/favicon.ico",className:o().dynamic([["3347930788",[v(),v()]]])})]}),(0,p.jsxs)("div",{className:o().dynamic([["3347930788",[v(),v()]]])+" game-content",children:[(0,p.jsxs)("div",{className:o().dynamic([["3347930788",[v(),v()]]])+" game-tips",children:[(0,p.jsx)("div",{className:o().dynamic([["3347930788",[v(),v()]]])+" tips start",children:"Move with WASD, shoot with Space "}),(0,p.jsx)("div",{className:o().dynamic([["3347930788",[v(),v()]]])+" tips end",children:"I- \xa0\xa0\xa0\xa000 HI- 2000"})]}),(0,p.jsx)("div",{className:o().dynamic([["3347930788",[v(),v()]]])+" main clearfix",children:(0,p.jsxs)("div",{id:"canvasDiv",className:o().dynamic([["3347930788",[v(),v()]]]),children:[(0,p.jsx)("canvas",{id:"wallCanvas",className:o().dynamic([["3347930788",[v(),v()]]])}),(0,p.jsx)("canvas",{id:"tankCanvas",className:o().dynamic([["3347930788",[v(),v()]]])}),(0,p.jsx)("canvas",{id:"grassCanvas",className:o().dynamic([["3347930788",[v(),v()]]])}),(0,p.jsx)("canvas",{id:"overCanvas",className:o().dynamic([["3347930788",[v(),v()]]])}),(0,p.jsx)("canvas",{id:"stageCanvas",style:{display:"none"},className:o().dynamic([["3347930788",[v(),v()]]])})]})})]}),(0,p.jsxs)("div",{className:o().dynamic([["3347930788",[v(),v()]]]),children:[(0,p.jsx)("div",{className:o().dynamic([["3347930788",[v(),v()]]])+" game-tips"}),(0,p.jsx)("textarea",{className:o().dynamic([["3347930788",[v(),v()]]])+" map-textarea"})]}),(0,p.jsx)(o(),{id:"3347930788",dynamic:[v(),v()],children:["#canvasDiv.__jsx-style-dynamic-selector canvas.__jsx-style-dynamic-selector{position:absolute;}",".mapContainer.__jsx-style-dynamic-selector{width:1200px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}",".game-content.__jsx-style-dynamic-selector{width:576px;}",".map-textarea.__jsx-style-dynamic-selector{width:550px;height:448px;margin-right:40px;background:#000;color:#fff;font-size:14px;box-sizing:border-box;padding:10px;line-height:1.5em;}"]})]})}window.onload=function(){t(2790),t(1998).default(),t(4953).default(),t(5646).default();var e=location.href.split("tank/");console.log("urlLevel=>>>",window.pageLevel,e[1]),t(9516).default(),t(1174).default(),t(7259).default(),t(9464).default(),t(4723).default(),t(6169).default(),t(5770).default(),t(8733).default(),t(1794).default(),t(2192).default(),t(9831).default();var a=localStorage.getItem("userEmail"),n=document.querySelector(".email-input");console.log(n),a&&n&&(n.value=a),gameState=GAME_STATE_INIT;var s=document.querySelector(".map-textarea");s.value="[\n  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],\n  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],\n  [0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0],\n  [0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0],\n  [0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0],\n  [0,0,1,1,0,0,1,1,0,0,1,1,2,2,1,1,0,0,1,1,0,0,1,1,0,0],\n  [0,0,1,1,0,0,1,1,0,0,1,1,2,2,1,1,0,0,1,1,0,0,1,1,0,0],\n  [0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0],\n  [0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0],\n  [0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0],\n  [0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0],\n  [0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0],\n  [1,1,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,1,1],\n  [2,2,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,2,2],\n  [0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0],\n  [0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0],\n  [0,0,1,1,0,0,1,1,0,0,1,1,1,1,1,1,0,0,1,1,0,0,1,1,0,0],\n  [0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0],\n  [0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0],\n  [0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0],\n  [0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0],\n  [0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0],\n  [0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0],\n  [0,0,1,1,0,0,1,1,0,0,0,1,1,1,1,0,0,0,1,1,0,0,1,1,0,0],\n  [0,0,0,0,0,0,0,0,0,0,0,1,9,8,1,0,0,0,0,0,0,0,0,0,0,0],\n  [0,0,0,0,0,0,0,0,0,0,0,1,8,8,1,0,0,0,0,0,0,0,0,0,0,0],\n]",s.addEventListener("input",function(){var e=[];e=(e=s.value.replace(/(\[)|(\])/g,"")).split(",");var a=[[]];e.forEach(function(e){var t=e;if(e.includes(" ")){var n=e.split(" ");t=n[n.length-1]}(t=t.trim())&&(26===a[a.length-1].length&&a.push([]),a[a.length-1].push(Number(t)))}),window.map.setMapLevel(1,a),window.map.draw(),console.log(s.value,a)})},y.getInitialProps=(n=(0,s.Z)(d().mark(function e(a){var t;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.query,a.req,(t=a.res).setHeader("Access-Control-Allow-Origin","*"),t.setHeader("Access-Control-Allow-Methods","POST,OPTIONS,GET"),t.setHeader("Access-Control-Allow-Headers","*"),e.abrupt("return",{tdk:1111});case 5:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),a.default=y},9831:function(e,a,t){"use strict";t.r(a),a.default=function(){function e(){menu=new Menu(ctx),stage=new Stage(ctx,level),map=new Map(wallCtx,grassCtx),(player1=new PlayTank(tankCtx)).x=129+map.offsetX,player1.y=385+map.offsetY,(player2=new PlayTank(tankCtx)).offsetX=128,player2.x=256+map.offsetX,player2.y=385+map.offsetY,appearEnemy=0,enemyArray=[],bulletArray=[],keys=[],crackArray=[],isGameOver=!1,overX=176,overY=384,overCtx.clearRect(0,0,SCREEN_WIDTH,SCREEN_HEIGHT),emenyStopTime=0,homeProtectedTime=-1,propTime=1e3}function a(){switch(gameState){case GAME_STATE_MENU:menu.draw();break;case GAME_STATE_INIT:stage.draw(),!0==stage.isReady&&(gameState=GAME_STATE_START);break;case GAME_STATE_START:(isGameOver||player1.lives<=0&&player2.lives<=0)&&(gameState=GAME_STATE_OVER,map.homeHit()),appearEnemy==maxEnemy&&0==enemyArray.length&&(gameState=GAME_STATE_WIN);break;case GAME_STATE_WIN:t();break;case GAME_STATE_OVER:overCtx.clearRect(0,0,SCREEN_WIDTH,SCREEN_HEIGHT),overCtx.drawImage(RESOURCE_IMAGE,POS.over[0],POS.over[1],64,32,overX+map.offsetX,overY+map.offsetY,64,32),console.log("gameOver",!0,(overY-=2)<=parseInt(map.mapHeight/2)),overY<=parseInt(map.mapHeight/2)&&(e(),1==menu.playNum&&(player2.lives=0),gameState=GAME_STATE_MENU,window.showDomGameState="gameOver")}gameState===GAME_STATE_MENU?($(".startCanvas").removeClass("start-game").addClass("end-game"),$(".game-tips").removeClass("start-game").addClass("end-game")):($(".startCanvas").removeClass("end-game").addClass("start-game"),$(".game-tips").removeClass("end-game").addClass("start-game")),window.showDomGameState&&($(".startCanvas").removeClass("first-start").addClass(showDomGameState||""),"gameOver"===showDomGameState||showDomGameState)}function t(){e(),1==menu.playNum&&(player2.lives=0),gameState=GAME_STATE_MENU,window.showDomGameState="passLevel"}window.ctx="",window.wallCtx="",window.grassCtx="",window.tankCtx="",window.overCtx="",window.menu=null,window.stage=null,window.map=null,window.player1=null,window.player2=null,window.prop=null,window.enemyArray=[],window.bulletArray=[],window.keys=[],window.crackArray=[],window.gameState=GAME_STATE_MENU,window.level=window.pageLevel?Number(window.pageLevel):1,window.maxEnemy=20,window.maxAppearEnemy=5,window.appearEnemy=0,window.mainframe=0,window.isGameOver=!1,window.overX=176,window.overY=384,window.emenyStopTime=0,window.homeProtectedTime=-1,window.propTime=300,$(document).ready(function(){window.canvas=$("#stageCanvas"),ctx=canvas[0].getContext("2d"),canvas.attr({width:SCREEN_WIDTH}),canvas.attr({height:SCREEN_HEIGHT}),wallCtx=$("#wallCanvas")[0].getContext("2d"),grassCtx=$("#grassCanvas")[0].getContext("2d"),$("#wallCanvas").attr({width:SCREEN_WIDTH}),$("#wallCanvas").attr({height:SCREEN_HEIGHT}),$("#grassCanvas").attr({width:SCREEN_WIDTH}),$("#grassCanvas").attr({height:SCREEN_HEIGHT}),tankCtx=$("#tankCanvas")[0].getContext("2d"),$("#tankCanvas").attr({width:SCREEN_WIDTH}),$("#tankCanvas").attr({height:SCREEN_HEIGHT}),overCtx=$("#overCanvas")[0].getContext("2d"),$("#overCanvas").attr({width:SCREEN_WIDTH}),$("#overCanvas").attr({height:SCREEN_HEIGHT}),$("#canvasDiv").css({width:SCREEN_WIDTH}),$("#canvasDiv").css({height:SCREEN_HEIGHT}),$("#canvasDiv").css({"background-color":"#000000"}),$(".startCanvas").css({"background-image":"url(".concat(MENU_IMAGE_URL,")")}),$(".stage-box-tank-icon").css({"background-image":"url(".concat(RESOURCE_IMAGE_URL,")")}),$(".game-over-image").css({"background-image":"url(".concat(RESOURCE_IMAGE_URL,")")}),e(),setInterval(a,20)}),setInterval(function(){},150),window.initObject=e,$(document).keydown(function(a){switch(gameState){case GAME_STATE_MENU:if(a.keyCode==keyboard.ENTER){var n=document.querySelector(".email-input"),s=n?n.value:"";if(!s)return;localStorage.setItem("a",s),gameState=GAME_STATE_INIT,1==menu.playNum&&(player2.lives=0)}break;case GAME_STATE_START:keys.contain(a.keyCode)||keys.push(a.keyCode),a.keyCode==keyboard.SPACE&&player1.lives>0?player1.shoot(BULLET_TYPE_PLAYER):a.keyCode==keyboard.ENTER&&player2.lives>0?player2.shoot(BULLET_TYPE_PLAYER2):a.keyCode==keyboard.N?t():a.keyCode==keyboard.P&&(0==--level&&(level=21),e(),1==menu.playNum&&(player2.lives=0),stage.init(level),gameState=GAME_STATE_INIT)}}),$(document).keyup(function(e){keys.remove(e.keyCode)}),window.initMap=function(){map.setMapLevel(level),map.draw(),drawLives()},window.drawLives=function(){map.drawLives(player1.lives,1),map.drawLives(player2.lives,2)},window.drawBullet=function(){if(null!=bulletArray&&bulletArray.length>0)for(window.i=0;i<bulletArray.length;i++)window.bulletObj=bulletArray[i],bulletObj.isDestroyed?(bulletObj.owner.isShooting=!1,bulletArray.removeByIndex(i),i--):bulletObj.draw()}}},4284:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/map",function(){return t(7220)}])},1787:function(){},29:function(e,a,t){"use strict";function n(e,a,t,n,s,r,o){try{var l=e[r](o),d=l.value}catch(e){t(e);return}l.done?a(d):Promise.resolve(d).then(n,s)}function s(e){return function(){var a=this,t=arguments;return new Promise(function(s,r){var o=e.apply(a,t);function l(e){n(o,s,r,l,d,"next",e)}function d(e){n(o,s,r,l,d,"throw",e)}l(void 0)})}}t.d(a,{Z:function(){return s}})}},function(e){e.O(0,[774,31,347,888,179],function(){return e(e.s=4284)}),_N_E=e.O()}]);